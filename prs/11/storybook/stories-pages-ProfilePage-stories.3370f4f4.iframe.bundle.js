"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[336],{"./src/stories/pages/ProfilePage.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AdminUser:()=>AdminUser,RegularUser:()=>RegularUser,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ProfilePage_stories});var currentUserFixtures=__webpack_require__("./src/fixtures/currentUserFixtures.js"),systemInfoFixtures=__webpack_require__("./src/fixtures/systemInfoFixtures.js"),http=__webpack_require__("./node_modules/msw/lib/core/http.mjs"),HttpResponse=__webpack_require__("./node_modules/msw/lib/core/HttpResponse.mjs"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/react/index.js"),ThemeProvider=__webpack_require__("./node_modules/react-bootstrap/esm/ThemeProvider.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Row=react.forwardRef((({bsPrefix,className,as:Component="div",...props},ref)=>{const decoratedBsPrefix=(0,ThemeProvider.oU)(bsPrefix,"row"),breakpoints=(0,ThemeProvider.gy)(),minBreakpoint=(0,ThemeProvider.Jm)(),sizePrefix=`${decoratedBsPrefix}-cols`,classes=[];return breakpoints.forEach((brkPoint=>{const propValue=props[brkPoint];let cols;delete props[brkPoint],null!=propValue&&"object"==typeof propValue?({cols}=propValue):cols=propValue;const infix=brkPoint!==minBreakpoint?`-${brkPoint}`:"";null!=cols&&classes.push(`${sizePrefix}${infix}-${cols}`)})),(0,jsx_runtime.jsx)(Component,{ref,...props,className:classnames_default()(className,decoratedBsPrefix,...classes)})}));Row.displayName="Row";const esm_Row=Row;const Col=react.forwardRef(((props,ref)=>{const[{className,...colProps},{as:Component="div",bsPrefix,spans}]=function useCol({as,bsPrefix,className,...props}){bsPrefix=(0,ThemeProvider.oU)(bsPrefix,"col");const breakpoints=(0,ThemeProvider.gy)(),minBreakpoint=(0,ThemeProvider.Jm)(),spans=[],classes=[];return breakpoints.forEach((brkPoint=>{const propValue=props[brkPoint];let span,offset,order;delete props[brkPoint],"object"==typeof propValue&&null!=propValue?({span,offset,order}=propValue):span=propValue;const infix=brkPoint!==minBreakpoint?`-${brkPoint}`:"";span&&spans.push(!0===span?`${bsPrefix}${infix}`:`${bsPrefix}${infix}-${span}`),null!=order&&classes.push(`order${infix}-${order}`),null!=offset&&classes.push(`offset${infix}-${offset}`)})),[{...props,className:classnames_default()(className,...spans,...classes)},{as,bsPrefix,spans}]}(props);return(0,jsx_runtime.jsx)(Component,{...colProps,ref,className:classnames_default()(className,!spans.length&&bsPrefix)})}));Col.displayName="Col";const esm_Col=Col,Badge=react.forwardRef((({bsPrefix,bg="primary",pill=!1,text,className,as:Component="span",...props},ref)=>{const prefix=(0,ThemeProvider.oU)(bsPrefix,"badge");return(0,jsx_runtime.jsx)(Component,{ref,...props,className:classnames_default()(className,prefix,pill&&"rounded-pill",text&&`text-${text}`,bg&&`bg-${bg}`)})}));Badge.displayName="Badge";const esm_Badge=Badge;function RoleBadge(_ref){let{role,currentUser}=_ref;const roles=currentUser.root.roles.map((o=>o.authority)),lcrole=role.replace("ROLE_","").toLowerCase();return roles.includes(role)?(0,jsx_runtime.jsx)(esm_Badge,{className:"bg-primary","data-testid":`role-badge-${lcrole}`,children:lcrole}):(0,jsx_runtime.jsx)("span",{"data-testid":`role-missing-${lcrole}`})}RoleBadge.__docgenInfo={description:"",methods:[],displayName:"RoleBadge"};var utils_currentUser=__webpack_require__("./src/main/utils/currentUser.js"),BasicLayout=__webpack_require__("./src/main/layouts/BasicLayout/BasicLayout.js"),es=__webpack_require__("./node_modules/react18-json-view/dist/es/index.mjs");const ProfilePage=()=>{const{data:currentUser}=(0,utils_currentUser.iZ)();if(!currentUser.loggedIn)return(0,jsx_runtime.jsx)("p",{children:"Not logged in."});const{email,pictureUrl,fullName}=currentUser.root.user;return(0,jsx_runtime.jsxs)(BasicLayout.A,{children:[(0,jsx_runtime.jsxs)(esm_Row,{className:"align-items-center profile-header mb-5 text-center text-md-left",children:[(0,jsx_runtime.jsx)(esm_Col,{md:2,children:(0,jsx_runtime.jsx)("img",{src:pictureUrl,alt:"Profile",className:"rounded-circle img-fluid profile-picture mb-3 mb-md-0"})}),(0,jsx_runtime.jsxs)(esm_Col,{md:!0,children:[(0,jsx_runtime.jsx)("h2",{children:fullName}),(0,jsx_runtime.jsx)("p",{className:"lead text-muted",children:email}),(0,jsx_runtime.jsx)(RoleBadge,{role:"ROLE_USER",currentUser}),(0,jsx_runtime.jsx)(RoleBadge,{role:"ROLE_MEMBER",currentUser}),(0,jsx_runtime.jsx)(RoleBadge,{role:"ROLE_ADMIN",currentUser})]})]}),(0,jsx_runtime.jsx)(esm_Row,{className:"text-left",children:(0,jsx_runtime.jsx)(es.Ay,{src:currentUser.root})})]})},pages_ProfilePage=ProfilePage;ProfilePage.__docgenInfo={description:"",methods:[],displayName:"ProfilePage"};const ProfilePage_stories={title:"pages/ProfilePage",component:pages_ProfilePage},Template=()=>(0,jsx_runtime.jsx)(pages_ProfilePage,{}),RegularUser=Template.bind({});RegularUser.parameters={msw:{handlers:[http.L.get("/api/currentUser",(()=>HttpResponse.c.json(currentUserFixtures.x.userOnly))),http.L.get("/api/systemInfo",(()=>HttpResponse.c.json(systemInfoFixtures.c.showingNeither)))]}};const AdminUser=Template.bind({});AdminUser.parameters={msw:{handlers:[http.L.get("/api/currentUser",(()=>HttpResponse.c.json(currentUserFixtures.x.adminUser))),http.L.get("/api/systemInfo",(()=>HttpResponse.c.json(systemInfoFixtures.c.showingBoth)))]}};const __namedExportsOrder=["RegularUser","AdminUser"];RegularUser.parameters={...RegularUser.parameters,docs:{...RegularUser.parameters?.docs,source:{originalSource:"() => <ProfilePage />",...RegularUser.parameters?.docs?.source}}},AdminUser.parameters={...AdminUser.parameters,docs:{...AdminUser.parameters?.docs,source:{originalSource:"() => <ProfilePage />",...AdminUser.parameters?.docs?.source}}}},"./src/fixtures/currentUserFixtures.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>currentUserFixtures,x:()=>apiCurrentUserFixtures});const apiCurrentUserFixtures={adminUser:{user:{id:1,email:"phtcon@ucsb.edu",googleSub:"115856948234298493496",pictureUrl:"https://lh3.googleusercontent.com/-bQynVrzVIrU/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmkGuVsELD1ZeV5iDUAUfe6_K-p8w/s96-c/photo.jpg",fullName:"Phill Conrad",givenName:"Phill",familyName:"Conrad",emailVerified:!0,locale:"en",hostedDomain:"ucsb.edu",admin:!0},roles:[{authority:"ROLE_MEMBER"},{authority:"SCOPE_openid"},{authority:"SCOPE_https://www.googleapis.com/auth/userinfo.profile"},{authority:"SCOPE_https://www.googleapis.com/auth/userinfo.email"},{authority:"ROLE_USER",attributes:{sub:"115856948234298493496",name:"Phill Conrad",given_name:"Phill",family_name:"Conrad",picture:"https://lh3.googleusercontent.com/a/AATXAJyxrU2gDahCiNe4ampVZlv5176Jo0F0PG3KyYgk=s96-c",email:"phtcon@ucsb.edu",email_verified:!0,locale:"en",hd:"ucsb.edu"}},{authority:"ROLE_ADMIN"}]},userOnly:{user:{id:2,email:"pconrad.cis@gmail.com",googleSub:"102656447703889917227",pictureUrl:"https://lh3.googleusercontent.com/a-/AOh14GhpDBUt8eCEqiRT45hrFbcimsX_h1ONn0dc3HV8Bp8=s96-c",fullName:"Phillip Conrad",givenName:"Phillip",familyName:"Conrad",emailVerified:!0,locale:"en",hostedDomain:null,admin:!1},roles:[{authority:"SCOPE_openid"},{authority:"ROLE_USER",attributes:{sub:"102656447703889917227",name:"Phillip Conrad",given_name:"Phillip",family_name:"Conrad",picture:"https://lh3.googleusercontent.com/a-/AOh14GhpDBUt8eCEqiRT45hrFbcimsX_h1ONn0dc3HV8Bp8=s96-c",email:"pconrad.cis@gmail.com",email_verified:!0,locale:"en"}},{authority:"SCOPE_https://www.googleapis.com/auth/userinfo.profile"},{authority:"SCOPE_https://www.googleapis.com/auth/userinfo.email"}]},missingRolesToTestErrorHandling:{user:{id:2,email:"pconrad.cis@gmail.com",googleSub:"102656447703889917227",pictureUrl:"https://lh3.googleusercontent.com/a-/AOh14GhpDBUt8eCEqiRT45hrFbcimsX_h1ONn0dc3HV8Bp8=s96-c",fullName:"Phillip Conrad",givenName:"Phillip",familyName:"Conrad",emailVerified:!0,locale:"en",hostedDomain:null,admin:!1}}},currentUserFixtures={adminUser:{loggedIn:!0,root:{...apiCurrentUserFixtures.adminUser,rolesList:["ROLE_MEMBER","SCOPE_openid","SCOPE_https://www.googleapis.com/auth/userinfo.profile","SCOPE_https://www.googleapis.com/auth/userinfo.email","ROLE_USER","ROLE_ADMIN"]}},userOnly:{loggedIn:!0,root:{...apiCurrentUserFixtures.userOnly,rolesList:["SCOPE_openid","ROLE_USER","SCOPE_https://www.googleapis.com/auth/userinfo.profile","SCOPE_https://www.googleapis.com/auth/userinfo.email"]}},notLoggedIn:{loggedIn:!1,root:{}}}},"./src/fixtures/systemInfoFixtures.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>systemInfoFixtures});const systemInfoFixtures={showingBoth:{springH2ConsoleEnabled:!0,showSwaggerUILink:!0,oauthLogin:"/oauth2/authorization/google"},showingNeither:{springH2ConsoleEnabled:!1,showSwaggerUILink:!1,oauthLogin:"/oauth2/authorization/google"},oauthLoginUndefined:{springH2ConsoleEnabled:!1,showSwaggerUILink:!1}}},"./src/main/components/Nav/AppNavbar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AppNavbar});var Navbar=__webpack_require__("./node_modules/react-bootstrap/esm/Navbar.js"),Container=__webpack_require__("./node_modules/react-bootstrap/esm/Container.js"),Nav=__webpack_require__("./node_modules/react-bootstrap/esm/Nav.js"),NavDropdown=__webpack_require__("./node_modules/react-bootstrap/esm/NavDropdown.js"),Button=__webpack_require__("./node_modules/react-bootstrap/esm/Button.js"),dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),utils_currentUser=__webpack_require__("./src/main/utils/currentUser.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function AppNavbarLocalhost(_ref){let{url}=_ref;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Navbar.A,{expand:"sm",bg:"warning",sticky:"top","data-testid":"AppNavbarLocalhost",children:(0,jsx_runtime.jsxs)(Container.A,{children:[(0,jsx_runtime.jsx)(Navbar.A.Brand,{href:"http://localhost:8080",children:"Warning"}),(0,jsx_runtime.jsx)(Navbar.A.Toggle,{}),(0,jsx_runtime.jsx)(Navbar.A.Collapse,{className:"justify-content-between",children:(0,jsx_runtime.jsx)(Nav.A,{className:"mr-auto text-center",children:(0,jsx_runtime.jsx)(Nav.A.Item,{className:"text-center",children:(0,jsx_runtime.jsxs)("p",{children:["Running on ",(0,jsx_runtime.jsx)("code",{children:url})," with no backend.",(0,jsx_runtime.jsx)("br",{}),"You probably want"," ",(0,jsx_runtime.jsx)("a",{href:"http://localhost:8080",children:"http://localhost:8080"})," ","instead."]})})})})]})})})}function AppNavbar(_ref){let{currentUser,systemInfo,doLogout,currentUrl=window.location.href}=_ref;var oauthLogin=(null==systemInfo?void 0:systemInfo.oauthLogin)||"/oauth2/authorization/google";return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(currentUrl.startsWith("http://localhost:3000")||currentUrl.startsWith("http://127.0.0.1:3000"))&&(0,jsx_runtime.jsx)(AppNavbarLocalhost,{url:currentUrl}),(0,jsx_runtime.jsx)(Navbar.A,{expand:"xl",variant:"dark",bg:"dark",sticky:"top","data-testid":"AppNavbar",children:(0,jsx_runtime.jsxs)(Container.A,{children:[(0,jsx_runtime.jsx)(Navbar.A.Brand,{as:dist.N_,to:"/",children:"Example"}),(0,jsx_runtime.jsx)(Navbar.A.Toggle,{}),(0,jsx_runtime.jsxs)(Nav.A,{className:"me-auto",children:[(null==systemInfo?void 0:systemInfo.springH2ConsoleEnabled)&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Nav.A.Link,{href:"/h2-console",children:"H2Console"})}),(null==systemInfo?void 0:systemInfo.showSwaggerUILink)&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Nav.A.Link,{href:"/swagger-ui/index.html",children:"Swagger"})})]}),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),(0,jsx_runtime.jsxs)(Navbar.A.Collapse,{className:"justify-content-between",children:[(0,jsx_runtime.jsxs)(Nav.A,{className:"mr-auto",children:[(0,utils_currentUser.hf)(currentUser,"ROLE_ADMIN")&&(0,jsx_runtime.jsx)(NavDropdown.A,{title:"Admin",id:"appnavbar-admin-dropdown","data-testid":"appnavbar-admin-dropdown",children:(0,jsx_runtime.jsx)(NavDropdown.A.Item,{href:"/admin/users",children:"Users"})}),currentUser&&currentUser.loggedIn?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Nav.A.Link,{as:dist.N_,to:"/restaurants",children:"Restaurants"}),(0,jsx_runtime.jsx)(Nav.A.Link,{as:dist.N_,to:"/ucsbdates",children:"UCSB Dates"}),(0,jsx_runtime.jsx)(Nav.A.Link,{as:dist.N_,to:"/placeholder",children:"Placeholder"})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})]}),(0,jsx_runtime.jsx)(Nav.A,{className:"ml-auto",children:currentUser&&currentUser.loggedIn?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Navbar.A.Text,{className:"me-3",as:dist.N_,to:"/profile",children:["Welcome, ",currentUser.root.user.email]}),(0,jsx_runtime.jsx)(Button.A,{onClick:doLogout,children:"Log Out"})]}):(0,jsx_runtime.jsx)(Button.A,{href:oauthLogin,children:"Log In"})})]})]})})]})}AppNavbarLocalhost.__docgenInfo={description:"",methods:[],displayName:"AppNavbarLocalhost"},AppNavbar.__docgenInfo={description:"",methods:[],displayName:"AppNavbar",props:{currentUrl:{defaultValue:{value:"window.location.href",computed:!0},required:!1}}}},"./src/main/layouts/BasicLayout/BasicLayout.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>BasicLayout});var Container=__webpack_require__("./node_modules/react-bootstrap/esm/Container.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Footer(){return(0,jsx_runtime.jsx)("footer",{className:"bg-light pt-3 pt-md-4 pb-4 pb-md-5","data-testid":"Footer",children:(0,jsx_runtime.jsx)(Container.A,{children:(0,jsx_runtime.jsxs)("p",{children:["This is a sample webapp using React with a Spring Boot backend. See the source code on"," ",(0,jsx_runtime.jsx)("a",{href:"https://github.com/ucsb-cs156/spring-react-template",children:"Github."})]})})})}Footer.__docgenInfo={description:"",methods:[],displayName:"Footer"};var AppNavbar=__webpack_require__("./src/main/components/Nav/AppNavbar.js"),utils_currentUser=__webpack_require__("./src/main/utils/currentUser.js"),es=__webpack_require__("./node_modules/react-query/es/index.js"),axios=__webpack_require__("./node_modules/axios/lib/axios.js");function BasicLayout(_ref){let{children}=_ref;const{data:currentUser}=(0,utils_currentUser.iZ)(),{data:systemInfo}=function useSystemInfo(){return(0,es.useQuery)("systemInfo",(async()=>{try{return(await axios.A.get("/api/systemInfo")).data}catch(e){return console.error("Error invoking axios.get: ",e),{}}}),{initialData:{initialData:!0,springH2ConsoleEnabled:!1,showSwaggerUILink:!1}})}(),doLogout=(0,utils_currentUser.Wn)().mutate;return(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[(0,jsx_runtime.jsx)(AppNavbar.A,{currentUser,systemInfo,doLogout}),(0,jsx_runtime.jsx)(Container.A,{expand:"xl",className:"pt-4 flex-grow-1",children}),(0,jsx_runtime.jsx)(Footer,{})]})}BasicLayout.__docgenInfo={description:"",methods:[],displayName:"BasicLayout"}},"./src/main/utils/currentUser.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Wn:()=>useLogout,hf:()=>hasRole,iZ:()=>useCurrentUser});var react_query__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-query/es/index.js"),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/axios/lib/axios.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-router/dist/index.js");function useCurrentUser(){let rolesList=["ERROR_GETTING_ROLES"];return(0,react_query__WEBPACK_IMPORTED_MODULE_0__.useQuery)("current user",(async()=>{try{const response=await axios__WEBPACK_IMPORTED_MODULE_1__.A.get("/api/currentUser");try{rolesList=response.data.roles.map((r=>r.authority))}catch(e){console.error("Error getting roles: ",e)}return response.data={...response.data,rolesList},{loggedIn:!0,root:response.data}}catch(e){console.error("Error invoking axios.get: ",e)}}),{initialData:{loggedIn:!1,root:null,initialData:!0}})}function useLogout(){const queryClient=(0,react_query__WEBPACK_IMPORTED_MODULE_0__.useQueryClient)(),navigate=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_2__.Zp)();return(0,react_query__WEBPACK_IMPORTED_MODULE_0__.useMutation)((async()=>{await axios__WEBPACK_IMPORTED_MODULE_1__.A.post("/logout"),await queryClient.resetQueries("current user",{exact:!0}),navigate("/")}))}function hasRole(currentUser,role){var _currentUser$root,_currentUser$root$rol;return null!=currentUser&&("data"in currentUser&&"root"in currentUser.data&&"rolesList"in currentUser.data.root?currentUser.data.root.rolesList.includes(role):null===(_currentUser$root=currentUser.root)||void 0===_currentUser$root||null===(_currentUser$root$rol=_currentUser$root.rolesList)||void 0===_currentUser$root$rol?void 0:_currentUser$root$rol.includes(role))}},"./node_modules/react18-json-view/dist/es/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>JsonView});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_path$8;function isObject(node){return"[object Object]"===Object.prototype.toString.call(node)}function objectSize(node){return Array.isArray(node)?node.length:isObject(node)?Object.keys(node).length:0}function stringifyForCopying(node,space){if("string"==typeof node)return node;try{return JSON.stringify(node,((key,value)=>{switch(typeof value){case"bigint":return String(value)+"n";case"number":case"boolean":case"object":case"string":return value;default:return String(value)}}),space)}catch(error){return`${error.name}: ${error.message}`||"JSON.stringify failed"}}function isCollapsed(node,depth,indexOrName,collapsed,collapseObjectsAfterLength,customOptions){if(customOptions&&void 0!==customOptions.collapsed)return!!customOptions.collapsed;if("boolean"==typeof collapsed)return collapsed;if("number"==typeof collapsed&&depth>collapsed)return!0;const size=objectSize(node);if("function"==typeof collapsed){const result=safeCall(collapsed,[{node,depth,indexOrName,size}]);if("boolean"==typeof result)return result}return!!(Array.isArray(node)&&size>collapseObjectsAfterLength)||!!(isObject(node)&&size>collapseObjectsAfterLength)}function isCollapsed_largeArray(node,depth,indexOrName,collapsed,collapseObjectsAfterLength,customOptions){if(customOptions&&void 0!==customOptions.collapsed)return!!customOptions.collapsed;if("boolean"==typeof collapsed)return collapsed;if("number"==typeof collapsed&&depth>collapsed)return!0;const size=Math.ceil(node.length/100);if("function"==typeof collapsed){const result=safeCall(collapsed,[{node,depth,indexOrName,size}]);if("boolean"==typeof result)return result}return!!(Array.isArray(node)&&size>collapseObjectsAfterLength)||!!(isObject(node)&&size>collapseObjectsAfterLength)}function ifDisplay(displaySize,depth,fold){return"boolean"==typeof displaySize?displaySize:"number"==typeof displaySize&&depth>displaySize||(!("collapsed"!==displaySize||!fold)||"expanded"===displaySize&&!fold)}function safeCall(func,params){try{return func(...params)}catch(event){reportError(event)}}function editableAdd(editable){return!0===editable||(!(!isObject(editable)||!0!==editable.add)||void 0)}function editableEdit(editable){return!0===editable||(!(!isObject(editable)||!0!==editable.edit)||void 0)}function editableDelete(editable){return!0===editable||(!(!isObject(editable)||!0!==editable.delete)||void 0)}function isReactComponent(component){return"function"==typeof component}function customAdd(customOptions){return!customOptions||void 0===customOptions.add||!!customOptions.add}function customEdit(customOptions){return!customOptions||void 0===customOptions.edit||!!customOptions.edit}function customDelete(customOptions){return!customOptions||void 0===customOptions.delete||!!customOptions.delete}function customCopy(customOptions){return!customOptions||void 0===customOptions.enableClipboard||!!customOptions.enableClipboard}function customMatchesURL(customOptions){return!customOptions||void 0===customOptions.matchesURL||!!customOptions.matchesURL}function resolveEvalFailedNewValue(type,value){return"string"===type?value.trim().replace(/^\"([\s\S]+?)\"$/,"$1"):value}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends$8.apply(this,arguments)}var SvgAngleDown=function SvgAngleDown(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("svg",_extends$8({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_path$8||(_path$8=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M12.473 5.806a.666.666 0 0 0-.946 0L8.473 8.86a.667.667 0 0 1-.946 0L4.473 5.806a.667.667 0 1 0-.946.94l3.06 3.06a2 2 0 0 0 2.826 0l3.06-3.06a.667.667 0 0 0 0-.94Z"})))},_path$7;function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends$7.apply(this,arguments)}var SvgCopy=function SvgCopy(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("svg",_extends$7({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},props),_path$7||(_path$7=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M17.542 2.5h-4.75a3.963 3.963 0 0 0-3.959 3.958v4.75a3.963 3.963 0 0 0 3.959 3.959h4.75a3.963 3.963 0 0 0 3.958-3.959v-4.75A3.963 3.963 0 0 0 17.542 2.5Zm2.375 8.708a2.378 2.378 0 0 1-2.375 2.375h-4.75a2.378 2.378 0 0 1-2.375-2.375v-4.75a2.378 2.378 0 0 1 2.375-2.375h4.75a2.378 2.378 0 0 1 2.375 2.375v4.75Zm-4.75 6.334a3.963 3.963 0 0 1-3.959 3.958h-4.75A3.963 3.963 0 0 1 2.5 17.542v-4.75a3.963 3.963 0 0 1 3.958-3.959.791.791 0 1 1 0 1.584 2.378 2.378 0 0 0-2.375 2.375v4.75a2.378 2.378 0 0 0 2.375 2.375h4.75a2.378 2.378 0 0 0 2.375-2.375.792.792 0 1 1 1.584 0Z"})))},_path$6,_path2$5;function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends$6.apply(this,arguments)}var SvgCopied=function SvgCopied(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("svg",_extends$6({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},props),_path$6||(_path$6=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.755 3.755 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.755 3.755 0 0 0 17.25 3Zm2.25 14.25a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5a2.25 2.25 0 0 1 2.25 2.25v10.5Z"})),_path2$5||(_path2$5=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"#14C786",d:"M10.312 14.45 7.83 11.906a.625.625 0 0 0-.896 0 .659.659 0 0 0 0 .918l2.481 2.546a1.264 1.264 0 0 0 .896.381 1.237 1.237 0 0 0 .895-.38l5.858-6.011a.658.658 0 0 0 0-.919.625.625 0 0 0-.896 0l-5.857 6.01Z"})))},_path$5,_path2$4;function CopyButton({node}){const{customizeCopy}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(JsonViewContext),[copied,setCopied]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return copied?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgCopied,{className:"json-view--copy",style:{display:"inline-block"}}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgCopy,{onClick:event=>{event.stopPropagation();const value=customizeCopy(node);"string"==typeof value&&value&&navigator.clipboard.writeText(value),setCopied(!0),setTimeout((()=>setCopied(!1)),3e3)},className:"json-view--copy"})}function NameValue({indexOrName,value,depth,parent,deleteHandle,editHandle}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",Object.assign({className:"json-view--pair"},{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",Object.assign({className:"number"==typeof indexOrName?"json-view--index":"json-view--property"},{children:indexOrName})),":"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JsonNode,{node:value,depth:depth+1,deleteHandle,editHandle,parent,indexOrName})]}))}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends$5.apply(this,arguments)}var SvgTrash=function SvgTrash(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("svg",_extends$5({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},props),_path$5||(_path$5=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M18.75 6h-2.325a3.757 3.757 0 0 0-3.675-3h-1.5a3.757 3.757 0 0 0-3.675 3H5.25a.75.75 0 0 0 0 1.5H6v9.75A3.754 3.754 0 0 0 9.75 21h4.5A3.754 3.754 0 0 0 18 17.25V7.5h.75a.75.75 0 1 0 0-1.5Zm-7.5-1.5h1.5A2.255 2.255 0 0 1 14.872 6H9.128a2.255 2.255 0 0 1 2.122-1.5Zm5.25 12.75a2.25 2.25 0 0 1-2.25 2.25h-4.5a2.25 2.25 0 0 1-2.25-2.25V7.5h9v9.75Z"})),_path2$4||(_path2$4=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"#DA0000",d:"M10.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75ZM13.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75Z"})))},_path$4,_path2$3;function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends$4.apply(this,arguments)}var SvgAddSquare=function SvgAddSquare(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("svg",_extends$4({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},props),_path$4||(_path$4=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M21 6.75v10.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3h10.5A3.754 3.754 0 0 1 21 6.75Zm-1.5 0c0-1.24-1.01-2.25-2.25-2.25H6.75C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25V6.75Z"})),_path2$3||(_path2$3=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"#14C786",d:"M15 12.75a.75.75 0 1 0 0-1.5h-2.25V9a.75.75 0 1 0-1.5 0v2.25H9a.75.75 0 1 0 0 1.5h2.25V15a.75.75 0 1 0 1.5 0v-2.25H15Z"})))},_path$3,_path2$2;function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends$3.apply(this,arguments)}var SvgDone=function SvgDone(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("svg",_extends$3({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},props),_path$3||(_path$3=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})),_path2$2||(_path2$2=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"#14C786",d:"m10.85 13.96-1.986-2.036a.5.5 0 0 0-.716 0 .527.527 0 0 0 0 .735l1.985 2.036a1.01 1.01 0 0 0 .717.305.99.99 0 0 0 .716-.305l4.686-4.808a.526.526 0 0 0 0-.735.5.5 0 0 0-.716 0l-4.687 4.809Z"})))},_path$2,_path2$1;function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends$2.apply(this,arguments)}var SvgCancel=function SvgCancel(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("svg",_extends$2({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},props),_path$2||(_path$2=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"#DA0000",d:"M15 9a.75.75 0 0 0-1.06 0L12 10.94 10.06 9A.75.75 0 0 0 9 10.06L10.94 12 9 13.94A.75.75 0 0 0 10.06 15L12 13.06 13.94 15A.75.75 0 0 0 15 13.94L13.06 12 15 10.06A.75.75 0 0 0 15 9Z"})),_path2$1||(_path2$1=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})))};function LargeArrayNode({originNode,node,depth,index,deleteHandle:_deleteSelf,customOptions,startIndex}){const{enableClipboard,src,onEdit,onChange,forceUpdate,displaySize}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(JsonViewContext),[fold,setFold]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0),editHandle=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(((indexOrName,newValue,oldValue)=>{originNode[indexOrName]=newValue,onEdit&&onEdit({newValue,oldValue,depth,src,indexOrName,parentType:"array"}),onChange&&onChange({type:"edit",depth,src,indexOrName,parentType:"array"}),forceUpdate()}),[node,onEdit,onChange,forceUpdate]),deleteHandle=index=>{originNode.splice(index,1),forceUpdate()},Icons=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[!fold&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({onClick:()=>setFold(!0),className:"jv-size-chevron"},{children:[ifDisplay(displaySize,depth,fold)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({className:"jv-size"},{children:[objectSize(node)," Items"]})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgAngleDown,{className:"jv-chevron"})]})),!fold&&enableClipboard&&customCopy(customOptions)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CopyButton,{node})]});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"["}),Icons,fold?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",Object.assign({onClick:()=>setFold(!1),className:"jv-button"},{children:[startIndex," ... ",startIndex+node.length-1]})):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",Object.assign({className:"jv-indent"},{children:node.map(((n,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NameValue,{indexOrName:i+startIndex,value:n,depth,parent:node,deleteHandle,editHandle},String(index)+String(i))))})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"]"})]})}function LargeArray({node,depth,deleteHandle:_deleteSelf,indexOrName,customOptions}){const nestCollapsedArray=[];for(let i=0;i<node.length;i+=100)nestCollapsedArray.push(node.slice(i,i+100));const{collapsed,enableClipboard,collapseObjectsAfterLength,editable,onDelete,src,onAdd,onEdit,onChange,forceUpdate,displaySize}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(JsonViewContext),[fold,setFold]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(isCollapsed_largeArray(node,depth,indexOrName,collapsed,collapseObjectsAfterLength,customOptions));(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setFold(isCollapsed_largeArray(node,depth,indexOrName,collapsed,collapseObjectsAfterLength,customOptions))}),[collapsed,collapseObjectsAfterLength]);const[deleting,setDeleting]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[adding,setAdding]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),add=()=>{const arr=node;arr.push(null),onAdd&&onAdd({indexOrName:arr.length-1,depth,src,parentType:"array"}),onChange&&onChange({type:"add",indexOrName:arr.length-1,depth,src,parentType:"array"}),forceUpdate()},isEditing=deleting||adding,Icons=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[!fold&&!isEditing&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({onClick:()=>setFold(!0),className:"jv-size-chevron"},{children:[ifDisplay(displaySize,depth,fold)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({className:"jv-size"},{children:[node.length," Items"]})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgAngleDown,{className:"jv-chevron"})]})),isEditing&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:adding?add:()=>{setDeleting(!1),_deleteSelf&&_deleteSelf(indexOrName),onDelete&&onDelete({value:node,depth,src,indexOrName,parentType:"array"}),onChange&&onChange({type:"delete",depth,src,indexOrName,parentType:"array"})}}),isEditing&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:()=>{setDeleting(!1),setAdding(!1)}}),!fold&&!isEditing&&enableClipboard&&customCopy(customOptions)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CopyButton,{node}),!fold&&!isEditing&&editableAdd(editable)&&customAdd(customOptions)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgAddSquare,{className:"json-view--edit",onClick:()=>{add()}}),!fold&&!isEditing&&editableDelete(editable)&&customDelete(customOptions)&&_deleteSelf&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgTrash,{className:"json-view--edit",onClick:()=>setDeleting(!0)})]});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"["}),Icons,fold?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",Object.assign({onClick:()=>setFold(!1),className:"jv-button"},{children:"..."})):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",Object.assign({className:"jv-indent"},{children:nestCollapsedArray.map(((item,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LargeArrayNode,{originNode:node,node:item,depth,index,startIndex:100*index},String(indexOrName)+String(index))))})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"]"}),fold&&ifDisplay(displaySize,depth,fold)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({onClick:()=>setFold(!1),className:"jv-size"},{children:[node.length," Items"]}))]})}function ObjectNode({node,depth,indexOrName,deleteHandle:_deleteSelf,customOptions}){const{collapsed,enableClipboard,ignoreLargeArray,collapseObjectsAfterLength,editable,onDelete,src,onAdd,onEdit,onChange,forceUpdate,displaySize}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(JsonViewContext);if(!ignoreLargeArray&&Array.isArray(node)&&node.length>100)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LargeArray,{node,depth,indexOrName,deleteHandle:_deleteSelf,customOptions});const isPlainObject=isObject(node),[fold,setFold]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(isCollapsed(node,depth,indexOrName,collapsed,collapseObjectsAfterLength,customOptions));(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setFold(isCollapsed(node,depth,indexOrName,collapsed,collapseObjectsAfterLength,customOptions))}),[collapsed,collapseObjectsAfterLength]);const editHandle=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(((indexOrName,newValue,oldValue)=>{Array.isArray(node)?node[+indexOrName]=newValue:node&&(node[indexOrName]=newValue),onEdit&&onEdit({newValue,oldValue,depth,src,indexOrName,parentType:isPlainObject?"object":"array"}),onChange&&onChange({type:"edit",depth,src,indexOrName,parentType:isPlainObject?"object":"array"}),forceUpdate()}),[node,onEdit,onChange,forceUpdate]),deleteHandle=indexOrName=>{Array.isArray(node)?node.splice(+indexOrName,1):node&&delete node[indexOrName],forceUpdate()},[deleting,setDeleting]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[adding,setAdding]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),inputRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),add=()=>{var _a;if(isPlainObject){const inputName=null===(_a=inputRef.current)||void 0===_a?void 0:_a.value;inputName&&(node[inputName]=null,inputRef.current&&(inputRef.current.value=""),setAdding(!1),onAdd&&onAdd({indexOrName:inputName,depth,src,parentType:"object"}),onChange&&onChange({type:"add",indexOrName:inputName,depth,src,parentType:"object"}))}else if(Array.isArray(node)){const arr=node;arr.push(null),onAdd&&onAdd({indexOrName:arr.length-1,depth,src,parentType:"array"}),onChange&&onChange({type:"add",indexOrName:arr.length-1,depth,src,parentType:"array"})}forceUpdate()},isEditing=deleting||adding,cancel=()=>{setDeleting(!1),setAdding(!1)},Icons=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[!fold&&!isEditing&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({onClick:()=>setFold(!0),className:"jv-size-chevron"},{children:[ifDisplay(displaySize,depth,fold)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({className:"jv-size"},{children:[objectSize(node)," Items"]})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgAngleDown,{className:"jv-chevron"})]})),adding&&isPlainObject&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{className:"json-view--input",placeholder:"property",ref:inputRef,onKeyDown:event=>{"Enter"===event.key?(event.preventDefault(),add()):"Escape"===event.key&&cancel()}}),isEditing&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:adding?add:()=>{setDeleting(!1),_deleteSelf&&_deleteSelf(indexOrName),onDelete&&onDelete({value:node,depth,src,indexOrName,parentType:isPlainObject?"object":"array"}),onChange&&onChange({type:"delete",depth,src,indexOrName,parentType:isPlainObject?"object":"array"})}}),isEditing&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:cancel}),!fold&&!isEditing&&enableClipboard&&customCopy(customOptions)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CopyButton,{node}),!fold&&!isEditing&&editableAdd(editable)&&customAdd(customOptions)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgAddSquare,{className:"json-view--edit",onClick:()=>{isPlainObject?(setAdding(!0),setTimeout((()=>{var _a;return null===(_a=inputRef.current)||void 0===_a?void 0:_a.focus()}))):add()}}),!fold&&!isEditing&&editableDelete(editable)&&customDelete(customOptions)&&_deleteSelf&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgTrash,{className:"json-view--edit",onClick:()=>setDeleting(!0)})]});return Array.isArray(node)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"["}),Icons,fold?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",Object.assign({onClick:()=>setFold(!1),className:"jv-button"},{children:"..."})):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",Object.assign({className:"jv-indent"},{children:node.map(((n,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NameValue,{indexOrName:i,value:n,depth,parent:node,deleteHandle,editHandle},String(indexOrName)+String(i))))})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"]"}),fold&&ifDisplay(displaySize,depth,fold)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({onClick:()=>setFold(!1),className:"jv-size"},{children:[objectSize(node)," Items"]}))]}):isPlainObject?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"{"}),Icons,fold?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",Object.assign({onClick:()=>setFold(!1),className:"jv-button"},{children:"..."})):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",Object.assign({className:"jv-indent"},{children:Object.entries(node).map((([name,value])=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NameValue,{indexOrName:name,value,depth,parent:node,deleteHandle,editHandle},String(indexOrName)+String(name))))})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"}"}),fold&&ifDisplay(displaySize,depth,fold)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({onClick:()=>setFold(!1),className:"jv-size"},{children:[objectSize(node)," Items"]}))]}):null}const LongString=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({str,className,ctrlClick},ref)=>{let{collapseStringMode,collapseStringsAfterLength,customizeCollapseStringUI}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(JsonViewContext);const[truncated,setTruncated]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0),strRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);collapseStringsAfterLength=collapseStringsAfterLength>0?collapseStringsAfterLength:0;const str_show=str.replace(/\s+/g," "),collapseStringUI="function"==typeof customizeCollapseStringUI?customizeCollapseStringUI(str_show,truncated):"string"==typeof customizeCollapseStringUI?customizeCollapseStringUI:"...",clickToTruncateOrEdit=event=>{var _a;if((event.ctrlKey||event.metaKey)&&ctrlClick)ctrlClick(event);else{const selection=window.getSelection();if(selection&&selection.anchorOffset!==selection.focusOffset&&(null===(_a=selection.anchorNode)||void 0===_a?void 0:_a.parentElement)===strRef.current)return;setTruncated(!truncated)}};if(str.length<=collapseStringsAfterLength)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({ref:strRef,className,onClick:ctrlClick},{children:['"',str,'"']}));if("address"===collapseStringMode)return str.length<=10?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({ref:strRef,className,onClick:ctrlClick},{children:['"',str,'"']})):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({ref:strRef,onClick:clickToTruncateOrEdit,className:className+" cursor-pointer"},{children:['"',truncated?[str_show.slice(0,6),collapseStringUI,str_show.slice(-4)]:str,'"']}));if("directly"===collapseStringMode)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({ref:strRef,onClick:clickToTruncateOrEdit,className:className+" cursor-pointer"},{children:['"',truncated?[str_show.slice(0,collapseStringsAfterLength),collapseStringUI]:str,'"']}));if("word"===collapseStringMode){let index_ahead=collapseStringsAfterLength,index_behind=collapseStringsAfterLength+1,str_collapsed=str_show,count=1;for(;;){if(/\W/.test(str[index_ahead])){str_collapsed=str.slice(0,index_ahead);break}if(/\W/.test(str[index_behind])){str_collapsed=str.slice(0,index_behind);break}if(6===count){str_collapsed=str.slice(0,collapseStringsAfterLength);break}count++,index_ahead--,index_behind++}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({ref:strRef,onClick:clickToTruncateOrEdit,className:className+" cursor-pointer"},{children:['"',truncated?[str_collapsed,collapseStringUI]:str,'"']}))}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({ref:strRef,className},{children:['"',str,'"']}))}));var _path$1;function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends$1.apply(this,arguments)}var SvgEdit=function SvgEdit(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("svg",_extends$1({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},props),_path$1||(_path$1=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.754 3.754 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.754 3.754 0 0 0 17.25 3Zm2.25 14.25c0 1.24-1.01 2.25-2.25 2.25H6.75c-1.24 0-2.25-1.01-2.25-2.25V6.75c0-1.24 1.01-2.25 2.25-2.25h10.5c1.24 0 2.25 1.01 2.25 2.25v10.5Zm-6.09-9.466-5.031 5.03a2.981 2.981 0 0 0-.879 2.121v1.19c0 .415.336.75.75.75h1.19c.8 0 1.554-.312 2.12-.879l5.03-5.03a2.252 2.252 0 0 0 0-3.182c-.85-.85-2.331-.85-3.18 0Zm-2.91 7.151c-.28.28-.666.44-1.06.44H9v-.44c0-.4.156-.777.44-1.06l3.187-3.188 1.06 1.061-3.187 3.188Zm5.03-5.03-.782.783-1.06-1.061.782-.782a.766.766 0 0 1 1.06 0 .75.75 0 0 1 0 1.06Z"})))},_path,_path2;function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var SvgLink=function SvgLink(props){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M6.75 3h5.5v1.5h-5.5C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25v-5.5H21v5.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3Z"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_1__.createElement("path",{fill:"currentColor",d:"M20.013 3h-3.946a.987.987 0 0 0 0 1.973h1.564l-6.342 6.342a1.004 1.004 0 0 0 0 1.396 1.004 1.004 0 0 0 1.396 0l6.342-6.342v1.564a.987.987 0 0 0 1.973 0V3.987A.987.987 0 0 0 20.013 3Z"})))};function JsonNode({node,depth,deleteHandle:_deleteHandle,indexOrName,parent,editHandle}){const{collapseStringsAfterLength,enableClipboard,editable,src,onDelete,onChange,customizeNode,matchesURL,urlRegExp}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(JsonViewContext);let customReturn;if("function"==typeof customizeNode&&(customReturn=safeCall(customizeNode,[{node,depth,indexOrName}])),customReturn){if((0,react__WEBPACK_IMPORTED_MODULE_1__.isValidElement)(customReturn))return customReturn;if(isReactComponent(customReturn)){const CustomComponent=customReturn;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CustomComponent,{node,depth,indexOrName})}}if(Array.isArray(node)||isObject(node))return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ObjectNode,{node,depth,indexOrName,deleteHandle:_deleteHandle,customOptions:"object"==typeof customReturn?customReturn:void 0});{const type=typeof node,[editing,setEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[deleting,setDeleting]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),valueRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),edit=()=>{setEditing(!0),setTimeout((()=>{var _a,_b;null===(_a=window.getSelection())||void 0===_a||_a.selectAllChildren(valueRef.current),null===(_b=valueRef.current)||void 0===_b||_b.focus()}))},done=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((()=>{let newValue=valueRef.current.innerText;try{"{}"!==newValue&&"[]"!==newValue||(newValue=`(${newValue})`);const evalValue=eval(newValue);editHandle&&editHandle(indexOrName,evalValue,node)}catch(e){const trimmedStringValue=resolveEvalFailedNewValue(type,newValue);editHandle&&editHandle(indexOrName,trimmedStringValue,node)}setEditing(!1)}),[editHandle]),cancel=()=>{setEditing(!1),setDeleting(!1)},deleteHandle=()=>{setDeleting(!1),_deleteHandle&&_deleteHandle(indexOrName),onDelete&&onDelete({value:node,depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object"}),onChange&&onChange({depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object",type:"delete"})},handleKeyDown=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((event=>{"Enter"===event.key?(event.preventDefault(),done()):"Escape"===event.key&&cancel()}),[done]),isEditing=editing||deleting,ctrlClick=!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle?event=>{(event.ctrlKey||event.metaKey)&&edit()}:void 0,Icons=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[isEditing&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:deleting?deleteHandle:done}),isEditing&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:cancel}),!isEditing&&enableClipboard&&customCopy(customReturn)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CopyButton,{node}),!isEditing&&matchesURL&&"string"===type&&urlRegExp.test(node)&&customMatchesURL(customReturn)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",Object.assign({href:node,target:"_blank",className:"json-view--link"},{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgLink,{})})),!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgEdit,{className:"json-view--edit",onClick:edit}),!isEditing&&editableDelete(editable)&&customDelete(customReturn)&&_deleteHandle&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgTrash,{className:"json-view--edit",onClick:()=>setDeleting(!0)})]});let className="json-view--string";switch("string"==typeof(null==customReturn?void 0:customReturn.className)&&(className+=" "+customReturn.className),type){case"number":case"bigint":className="json-view--number";break;case"boolean":className="json-view--boolean";break;case"object":className="json-view--null"}deleting&&(className+=" json-view--deleting");let displayValue=String(node);"bigint"===type&&(displayValue+="n");const EditingElement=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{contentEditable:!0,className,dangerouslySetInnerHTML:{__html:"string"===type?`"${displayValue}"`:displayValue},ref:valueRef,onKeyDown:handleKeyDown})),[displayValue,type,handleKeyDown]);return"string"===type?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[editing?EditingElement:node.length>collapseStringsAfterLength?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LongString,{str:node,ref:valueRef,className,ctrlClick}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",Object.assign({className,onClick:ctrlClick},{children:['"',displayValue,'"']})),Icons]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[editing?EditingElement:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",Object.assign({className,onClick:ctrlClick},{children:displayValue})),Icons]})}}const defaultURLRegExp=/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/,JsonViewContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({src:void 0,collapseStringsAfterLength:99,collapseStringMode:"directly",customizeCollapseStringUI:void 0,collapseObjectsAfterLength:20,collapsed:!1,enableClipboard:!0,editable:!1,onEdit:void 0,onDelete:void 0,onAdd:void 0,onChange:void 0,forceUpdate:()=>{},customizeNode:void 0,customizeCopy:()=>{},displaySize:void 0,matchesURL:!1,urlRegExp:defaultURLRegExp,ignoreLargeArray:!1});function JsonView({src:_src,collapseStringsAfterLength=99,collapseStringMode="directly",customizeCollapseStringUI,collapseObjectsAfterLength=99,collapsed,enableClipboard=!0,editable=!1,onEdit,onDelete,onAdd,onChange,dark=!1,theme="default",customizeNode,customizeCopy=stringifyForCopying,displaySize,style,className,matchesURL=!1,urlRegExp=defaultURLRegExp,ignoreLargeArray=!1}){const[_,update]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),forceUpdate=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((()=>update((state=>++state))),[]),[src,setSrc]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_src);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>setSrc(_src)),[_src]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JsonViewContext.Provider,Object.assign({value:{src,collapseStringsAfterLength,collapseStringMode,customizeCollapseStringUI,collapseObjectsAfterLength,collapsed,enableClipboard,editable,onEdit,onDelete,onAdd,onChange,forceUpdate,customizeNode,customizeCopy,displaySize,matchesURL,urlRegExp,ignoreLargeArray}},{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("code",Object.assign({className:"json-view"+(dark?" dark":"")+(theme&&"default"!==theme?" json-view_"+theme:"")+(className?" "+className:""),style},{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JsonNode,{node:src,depth:1,editHandle:(indexOrName,newValue,oldValue)=>{setSrc(newValue),onEdit&&onEdit({newValue,oldValue,depth:1,src,indexOrName,parentType:null}),onChange&&onChange({type:"edit",depth:1,src,indexOrName,parentType:null})},deleteHandle:()=>{setSrc(void 0),onDelete&&onDelete({value:src,depth:1,src,indexOrName:"",parentType:null}),onChange&&onChange({depth:1,src,indexOrName:"",parentType:null,type:"delete"})}})}))}))}}}]);